<!--
  ===================    !!READ THIS NOTICE!!   ====================
  DO NOT edit this file manually. Your changes WILL BE OVERWRITTEN!
  This journal is auto generated and updated by Hack Club Blueprint.
  To edit this file, please edit your journal entries on Blueprint.
  ==================================================================
-->

This is my journal of the design and building process of **Euclidean VCA**.  
You can view this journal in more detail on **Hack Club Blueprint** [here](https://blueprint.hackclub.com/projects/340).


## 10/9/2025 - Design specifications / Early schematic work.  

Alrighty! Highway 2.0 I guess.

I'm going to try and follow a similar journal format to my highway projects, so we may as well get into it.

# Euclidean VCA

The basic concept behind this effect pedal is pretty much completely stolen from a digital plugin called [HY-ESG](https://bpb.gumroad.com/l/hy-esg/HYESGFREE).

![HY-ESG UI](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTE3MSwicHVyIjoiYmxvYl9pZCJ9fQ==--28f3ae68b373cba9267337b02d5ee28dd5ece970/image.png)

This effect is a super versatile and (imo) really cool effect. I use it extensively in my projects and I think it would be really cool to have an effect like it that I can use without having my laptop and a bunch of additional latency on stage. 

In summary, what the effect actually does is modulate the *volume* of the input based on a *euclidean sequencer.* 

## Sequencer

I think the best way to show how this works is by just showing it, so here's a quick demo.

![HY-ESG Sequencer demo](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTE3MiwicHVyIjoiYmxvYl9pZCJ9fQ==--a3ac19ee0834e37bc5d7d4e5310b8558f2a1a7d3/2025-10-09%2020-21-08.gif)

When the sequencer goes onto a bright segment, the volume turns on, and when it goes dark, it turns off. 
The steps parameter changes the number of steps in a cycle, and the pulse parameter changes how many are active per cycle. Rotate just offsets it. How the pulses are distributed in the cycle is the entire subject matter of euclidean sequencers, and it is (practically) impossible to do with an analog circuit, so for this I am going to use a microcontroller. 

## Envelope

Alright, so the actual sequencer part is sorted. Next up, the envelope generator. Ideally, we could just output a voltage from the MCU which controlled a little amplifier to change the volume of the instrument smoothly, rising up and down without massive sharp edges (configurable by the user of course, this being the basis of an adsr envelope). Unfortunately, the microcontrollers I am considering using do not have true analog output, instead sending a pwm signal. This might not be a problem, but I have a bad feeling about it, so instead I'm simply going to output digital high on a pulse, and digital low on a gap. This will then be the input into an analog envelope generator, which transforms the signal as per the example below. 

![ar-envelope](https://blueprint.hackclub.com/user-attachments/blobs/proxy/eyJfcmFpbHMiOnsiZGF0YSI6MTE3MywicHVyIjoiYmxvYl9pZCJ9fQ==--eecd47fffec6684738e22715470256f5e1a2312d/ar-envelope.png)
*This is actually an ar (attack - release) envelope, which is probably what I'll use in the design due to complexity, and not really needing delay and sustain.*

This then just needs to run into a VCA to control the actual volume of the instrument. 

## The VCA

There are a couple circuits online, but the one I'm most familiar with is a Long-Tailed-Pair VCA. The main downside is it requires a couple closely matched resistors and transistors, but with a bit of manual adjustment and gluing the transistors together for heat it should be ok. The other problem is that the circuit I've currently got requires a dual rail power supply, and as I want this to stick to the defacto standard for pedals, I'll only have 0v and 9v. The obvious solution here is to use a virtual ground at 4.5v, and apply a dc bias to the input signal and then filter it out at the end. This unfortunately does mean I need to do a bit of a redesign on the VCA circuit, so we'll see how that goes. 

Anyways, that'll do for today. Tomorrow I'm going to work on getting a model of the circuit simulated so I can finalise the design and move onto the schematic and pcb. Following that, case and art design as well as figuring out what knobs and dials I need.

Tschuss!  

